{% extends "base.html" %}

<!-- lofiles -->
{% load static %}

<!-- title -->
{% block title %}
  Home
{% endblock title %}

<!-- css file path -->
{% block css %}
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock css %}

{% block otherlink %}

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>


{% endblock otherlink %}

<!-- main -->
{% block body %}


<main>

{% if messages %}
  {% for msg in messages %}
    <p {% if msg.tags %} class="alert alert-{{msg.tags}}" {% endif %}> {{msg}} </p>
  {% endfor %}
{% endif %}


<!-- <div class="brand-headline">
  <img src="{% static 'images/background1.jpg' %}" alt="">
</div> -->

<!-- {% include "header.html" %} -->

<div class="option-container">

  <!-- filter -->
  <div class="filter-container">

    <div class="nav">
      <a href="/" style="text-decoration: none; color: orangered;"> All </a> 
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- brand -->
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black; ">Brand</a>
        <ul class="dropdown-menu" role="menu">
          {% for brand in brands %}
            <li><a href="/?brand={{brand.brand_id}}" style="text-decoration: none; color: black; margin-left: 15px;"> {{brand.brand_name}} </a></li>
          {% endfor %}
        </ul>
      </div>
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- transmission -->
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;"  data-bs-toggle="dropdown">Transmission</a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/?transmission=manual" style="text-decoration: none; color: black; margin-left: 15px;"> Manual </a></li>
            <li><a href="/?transmission=automatic" style="text-decoration: none; color: black; margin-left: 15px;"> Automatic </a></li>
        </ul>
      </div>
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- Fuel Type -->
    <div class='nav'>
      <div class='dropdown' >
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">Fuel</a>
        <ul class="dropdown-menu" role="menu"  style="width: 100px !important;">
            <li><a href="/?fuel=petrol" style="text-decoration: none; color: black; margin-left: 15px; "> Petrol </a></li>
            <li><a href="/?fuel=disel" style="text-decoration: none; color: black; margin-left: 15px;"> Disel </a></li>
            <li><a href="/?fuel=cng" style="text-decoration: none; color: black; margin-left: 15px;"> CNG </a></li>
        </ul>
      </div>
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- Price -->
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">Price</a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/?price=200000" style="text-decoration: none; color: black; margin-left: 15px;"> Belove 200000 </a></li>
            <li><a href="/?price=500000" style="text-decoration: none; color: black; margin-left: 15px;"> 200000-500000 </a></li>
            <li><a href="/?price=1000000" style="text-decoration: none; color: black; margin-left: 15px;"> 500000-1000000 </a></li>
        </ul>
      </div>
    </div>

    
    <!-- Price -->
    <!-- <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">KM Driven</a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/?price=200000" style="text-decoration: none; color: black; margin-left: 15px;"> Belove 200000 </a></li>
            <li><a href="/?price=500000" style="text-decoration: none; color: black; margin-left: 15px;"> 200000-500000 </a></li>
            <li><a href="/?price=1000000" style="text-decoration: none; color: black; margin-left: 15px;"> 500000-1000000 </a></li>
        </ul>
      </div>
    </div> -->

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- Price -->
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">No Of Owner</a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/?owner=0" style="text-decoration: none; color: black; margin-left: 15px;"> 0 </a></li>
            <li><a href="/?owner=1" style="text-decoration: none; color: black; margin-left: 15px;"> 1 </a></li>
            <li><a href="/?owner=2" style="text-decoration: none; color: black; margin-left: 15px;"> 2 </a></li>
            <li><a href="/?owner=3" style="text-decoration: none; color: black; margin-left: 15px;"> 3 </a></li>
        </ul>
      </div>
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- Sorting -->
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">
          <span style="color: orangered; font-size: 16px !important;"> Sort By: </span> Default
        </a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/?sort=LTH" style="text-decoration: none; color: black; margin-left: 15px;"> Price, low to high </a></li>
            <li><a href="/?sort=HTL" style="text-decoration: none; color: black; margin-left: 15px;"> Price, high to low </a></li>
            <li><a href="/?sort=ATZ" style="text-decoration: none; color: black; margin-left: 15px;"> Name, A to Z </a></li>
            <li><a href="/?sort=ZTA" style="text-decoration: none; color: black; margin-left: 15px;"> Name, Z to A </a></li>
        </ul>
      </div>
    </div>

    &nbsp;&nbsp;&nbsp;&nbsp;
    <!-- Color -->
    {% comment %}
      
    <div class='nav'>
      <div class='dropdown'>
        <a class="dropdown-toggle" data-toggle="dropdown" href='#' style="text-decoration: none; color: black;">Color</a>
        <ul class="dropdown-menu" role="menu">
          {% with my_list=car.values_list('color', flat=True) %}
            {% for c in my_list|list|uniq %}
            <li><a href="/?color={{c.color}}" style="text-decoration: none; color: black; margin-left: 15px;"> {{c.color}} </a></li>    
            {% endfor %}
            {% endwith %}
          </ul>
      </div>
    </div>
    
    {% endcomment %}


  </div>

  <!-- search form  -->
  <div class="search-form-container">
    <form class="search-div" method="POST" action="" >
      {% csrf_token %}
      <input class="form-control me-2 search-input" type="search" placeholder="Search" aria-label="Search" name="search">
      <button class="btn btn-outline-primary search-btn">Search</button>
    </form>
  </div>
  
</div>


<!-- card -->
<div id="card-container">
  {% for c in car %}
  <div class="card" style="width: 18rem;">    
     <a href="{% url 'car' c.car_id %}"> <img src="media/{{c.image_url}}" width="300px" height="200px" alt="{{c.image_url}}"> </a>
      <div class="card-body">
        <h5 class="card-title"> <b> {{c.car_name}} </b> </h5>
        <p class="card-text"> <b> Transimision : </b>  {{c.transmission}} </p>
        <h5> <strong> $ {{c.price}} </strong> </h5> 
      </div>
  </div>
    {% empty %}
      <div class="empty">
        <div class="p">
          <p> No data found</p>
        </div>
      </div>
    {% endfor %}
</div>
  
  <!-- pagination -->
    <div class="pagination-container"  aria-label="Page navigation example">
        <div class="pagination">
          {% if car.has_previous %}
            <div class="page-item"><a class="page-link" href="/?page=1">First</a></div>
            <div class="page-item"><a class="page-link" href="/?page={{car.previous_page_number}}">Previous</a></div>
          {% endif %}

          {% for n in totalpagelist %}
            <div class="page-item"><a class="page-link" href="/?page={{n}}">{{n}}</a></div>
          {% endfor %}

          {% if car.has_next %}
            <div class="page-item"><a class="page-link" href="/?page={{car.next_page_number}}">Next</a></div>
            <div class="page-item"><a class="page-link" href="/?page={{lastpage}}">Last</a></div>
          {% endif %}
        </div>
    </div>


  <!-- <h1 class="feedback-heading"> Reviews </h1>
  <div class="feed-parent">
    <div class="feedback-container">
      {% for rw in reviews %}
          <div class="feeback">
            <div class="card" style="width: 18rem;">
              <div class="card-body">
                <h5 class="card-title">{{rw.user_id}}</h5>
                <p class="card-text">{{rw.review_text}}</p>
              </div>
            </div>
          </div>
      {% endfor %}
    </div>
  </div> -->
  

  <script>

      $('.dropdown-toggle').click(function(){
        $(this).next(".dropdown-menu").toggle();
      });

      $(document).on('click', function (e) {
        if (!$(e.target).closest('.dropdown-menu').length) {
          if ($('.dropdown-menu').is(":visible")) {
            $('.dropdown-menu').hide();
            $('.dropdown').attr('aria-expanded', false);
          }
        }
      });

      // Add a click event listener to all dropdown toggle elements
    $('.dropdown-toggle').on('click', function() {
      // Close all open dropdown menus
      $('.dropdown-menu').not($(this).closest('.dropdown').find('.dropdown-menu')).hide();
      $('.dropdown-menu').not($(this).closest('.dropdown').find('.dropdown-menu')).attr('aria-expanded', false);
      // Open the clicked dropdown menu
      $(this).closest('.dropdown').find('.dropdown-menu').show();
      $(this).closest('.dropdown').find('.dropdown-menu').attr('aria-expanded', true);
    });


  </script>

</main>

{% endblock body %}